import{d as M,u as I,e as F,r as L,o as V,$ as P,U as S,a as J,c as W,b as d,f as B,w as E,g as N,h as z}from"./index.js";var j={exports:{}};/*! DateTime picker for DataTables.net v1.1.2
 *
 * Â© SpryMedia Ltd, all rights reserved.
 * License: MIT datatables.net/license/mit
 */(function(Y,H){(function(o){Y.exports=function(r,y){return r||(r=window),o(y,r,r.document)}})(function(o,r,y,x){var u,m=function(t,e){typeof u>"u"&&(u=r.moment?r.moment:r.dayjs?r.dayjs:r.luxon?r.luxon:null),this.c=o.extend(!0,{},m.defaults,e);var s=this.c.classPrefix,i=this.c.i18n;if(!u&&this.c.format!=="YYYY-MM-DD")throw"DateTime: Without momentjs, dayjs or luxon only the format 'YYYY-MM-DD' can be used";typeof this.c.minDate=="string"&&(this.c.minDate=new Date(this.c.minDate)),typeof this.c.maxDate=="string"&&(this.c.maxDate=new Date(this.c.maxDate));var a=o('<div class="'+s+'"><div class="'+s+'-date"><div class="'+s+'-title"><div class="'+s+'-iconLeft"><button type="button" title="'+i.previous+'">'+i.previous+'</button></div><div class="'+s+'-iconRight"><button type="button" title="'+i.next+'">'+i.next+'</button></div><div class="'+s+'-label"><span></span><select class="'+s+'-month"></select></div><div class="'+s+'-label"><span></span><select class="'+s+'-year"></select></div></div><div class="'+s+'-buttons"><a class="'+s+'-clear">'+i.clear+'</a><a class="'+s+'-today">'+i.today+'</a></div><div class="'+s+'-calendar"></div></div><div class="'+s+'-time"><div class="'+s+'-hours"></div><div class="'+s+'-minutes"></div><div class="'+s+'-seconds"></div></div><div class="'+s+'-error"></div></div>');this.dom={container:a,date:a.find("."+s+"-date"),title:a.find("."+s+"-title"),calendar:a.find("."+s+"-calendar"),time:a.find("."+s+"-time"),error:a.find("."+s+"-error"),buttons:a.find("."+s+"-buttons"),clear:a.find("."+s+"-clear"),today:a.find("."+s+"-today"),input:o(t)},this.s={d:null,display:null,minutesRange:null,secondsRange:null,namespace:"dateime-"+m._instance++,parts:{date:this.c.format.match(/[YMD]|L(?!T)|l/)!==null,time:this.c.format.match(/[Hhm]|LT|LTS/)!==null,seconds:this.c.format.indexOf("s")!==-1,hours12:this.c.format.match(/[haA]/)!==null}},this.dom.container.append(this.dom.date).append(this.dom.time).append(this.dom.error),this.dom.date.append(this.dom.title).append(this.dom.buttons).append(this.dom.calendar),this._constructor()};return o.extend(m.prototype,{destroy:function(){this._hide(!0),this.dom.container.off().empty(),this.dom.input.removeAttr("autocomplete").off(".datetime")},errorMsg:function(t){var e=this.dom.error;return t?e.html(t):e.empty(),this},hide:function(){return this._hide(),this},max:function(t){return this.c.maxDate=typeof t=="string"?new Date(t):t,this._optionsTitle(),this._setCalander(),this},min:function(t){return this.c.minDate=typeof t=="string"?new Date(t):t,this._optionsTitle(),this._setCalander(),this},owns:function(t){return o(t).parents().filter(this.dom.container).length>0},val:function(t,e){if(t===x)return this.s.d;if(t instanceof Date)this.s.d=this._dateToUtc(t);else if(t===null||t==="")this.s.d=null;else if(t==="--now")this.s.d=new Date;else if(typeof t=="string")if(u&&u==r.luxon){var s=u.DateTime.fromFormat(t,this.c.format);this.s.d=s.isValid?s.toJSDate():null}else if(u){var i=u.utc(t,this.c.format,this.c.locale,this.c.strict);this.s.d=i.isValid()?i.toDate():null}else{var a=t.match(/(\d{4})\-(\d{2})\-(\d{2})/);this.s.d=a?new Date(Date.UTC(a[1],a[2]-1,a[3])):null}return(e||e===x)&&(this.s.d?this._writeOutput():this.dom.input.val(t)),this.s.display=this.s.d?new Date(this.s.d.toString()):new Date,this.s.display.setUTCDate(1),this._setTitle(),this._setCalander(),this._setTime(),this},_constructor:function(){var t=this,e=this.c.classPrefix,s=this.dom.input.val(),i=function(){var a=t.dom.input.val();a!==s&&(t.c.onChange.call(t,a,t.s.d,t.dom.input),s=a)};this.s.parts.date||this.dom.date.css("display","none"),this.s.parts.time||this.dom.time.css("display","none"),this.s.parts.seconds||(this.dom.time.children("div."+e+"-seconds").remove(),this.dom.time.children("span").eq(1).remove()),this.c.buttons.clear||this.dom.clear.css("display","none"),this.c.buttons.today||this.dom.today.css("display","none"),this._optionsTitle(),o(y).on("i18n.dt",function(a,n){n.oLanguage.datetime&&(o.extend(!0,t.c.i18n,n.oLanguage.datetime),t._optionsTitle())}),this.dom.input.attr("type")==="hidden"&&(this.dom.container.addClass("inline"),this.c.attachTo="input",this.val(this.dom.input.val(),!1),this._show()),s&&this.val(s,!1),this.dom.input.attr("autocomplete","off").on("focus.datetime click.datetime",function(){t.dom.container.is(":visible")||t.dom.input.is(":disabled")||(t.val(t.dom.input.val(),!1),t._show())}).on("keyup.datetime",function(){t.dom.container.is(":visible")&&t.val(t.dom.input.val(),!1)}),this.dom.container.on("change","select",function(){var a=o(this),n=a.val();if(a.hasClass(e+"-month"))t._correctMonth(t.s.display,n),t._setTitle(),t._setCalander();else if(a.hasClass(e+"-year"))t.s.display.setUTCFullYear(n),t._setTitle(),t._setCalander();else if(a.hasClass(e+"-hours")||a.hasClass(e+"-ampm")){if(t.s.parts.hours12){var l=o(t.dom.container).find("."+e+"-hours").val()*1,c=o(t.dom.container).find("."+e+"-ampm").val()==="pm";t.s.d.setUTCHours(l===12&&!c?0:c&&l!==12?l+12:l)}else t.s.d.setUTCHours(n);t._setTime(),t._writeOutput(!0),i()}else a.hasClass(e+"-minutes")?(t.s.d.setUTCMinutes(n),t._setTime(),t._writeOutput(!0),i()):a.hasClass(e+"-seconds")&&(t.s.d.setSeconds(n),t._setTime(),t._writeOutput(!0),i());t.dom.input.focus(),t._position()}).on("click",function(a){var n=t.s.d,l=a.target.nodeName.toLowerCase(),c=l==="span"?a.target.parentNode:a.target;if(l=c.nodeName.toLowerCase(),l!=="select")if(a.stopPropagation(),l==="a"&&(a.preventDefault(),o(c).hasClass(e+"-clear")?(t.s.d=null,t.dom.input.val(""),t._writeOutput(),t._setCalander(),t._setTime(),i()):o(c).hasClass(e+"-today")&&(t.s.display=new Date,t._setTitle(),t._setCalander())),l==="button"){var v=o(c),f=v.parent();if(f.hasClass("disabled")&&!f.hasClass("range")){v.blur();return}if(f.hasClass(e+"-iconLeft"))t.s.display.setUTCMonth(t.s.display.getUTCMonth()-1),t._setTitle(),t._setCalander(),t.dom.input.focus();else if(f.hasClass(e+"-iconRight"))t._correctMonth(t.s.display,t.s.display.getUTCMonth()+1),t._setTitle(),t._setCalander(),t.dom.input.focus();else if(v.parents("."+e+"-time").length){var p=v.data("value"),T=v.data("unit");if(n=t._needValue(),T==="minutes")if(f.hasClass("disabled")&&f.hasClass("range")){t.s.minutesRange=p,t._setTime();return}else t.s.minutesRange=null;if(T==="seconds")if(f.hasClass("disabled")&&f.hasClass("range")){t.s.secondsRange=p,t._setTime();return}else t.s.secondsRange=null;if(p==="am")if(n.getUTCHours()>=12)p=n.getUTCHours()-12;else return;else if(p==="pm")if(n.getUTCHours()<12)p=n.getUTCHours()+12;else return;var h=T==="hours"?"setUTCHours":T==="minutes"?"setUTCMinutes":"setSeconds";n[h](p),t._setTime(),t._writeOutput(!0),i()}else n=t._needValue(),n.setUTCDate(1),n.setUTCFullYear(v.data("year")),n.setUTCMonth(v.data("month")),n.setUTCDate(v.data("day")),t._writeOutput(!0),t.s.parts.time?t._setCalander():setTimeout(function(){t._hide()},10),i()}else t.dom.input.focus()})},_compareDates:function(t,e){return u&&u==r.luxon?u.DateTime.fromJSDate(t).toISODate()===u.DateTime.fromJSDate(e).toISODate():this._dateToUtcString(t)===this._dateToUtcString(e)},_correctMonth:function(t,e){var s=this._daysInMonth(t.getUTCFullYear(),e),i=t.getUTCDate()>s;t.setUTCMonth(e),i&&(t.setUTCDate(s),t.setUTCMonth(e))},_daysInMonth:function(t,e){var s=t%4===0&&(t%100!==0||t%400===0),i=[31,s?29:28,31,30,31,30,31,31,30,31,30,31];return i[e]},_dateToUtc:function(t){return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()))},_dateToUtcString:function(t){return u&&u==r.luxon?u.DateTime.fromJSDate(t).toISODate():t.getUTCFullYear()+"-"+this._pad(t.getUTCMonth()+1)+"-"+this._pad(t.getUTCDate())},_hide:function(t){if(!(!t&&this.dom.input.attr("type")==="hidden")){var e=this.s.namespace;this.dom.container.detach(),o(r).off("."+e),o(y).off("keydown."+e),o("div.dataTables_scrollBody").off("scroll."+e),o("div.DTE_Body_Content").off("scroll."+e),o("body").off("click."+e),o(this.dom.input[0].offsetParent).off("."+e)}},_hours24To12:function(t){return t===0?12:t>12?t-12:t},_htmlDay:function(t){if(t.empty)return'<td class="empty"></td>';var e=["selectable"],s=this.c.classPrefix;return t.disabled&&e.push("disabled"),t.today&&e.push("now"),t.selected&&e.push("selected"),'<td data-day="'+t.day+'" class="'+e.join(" ")+'"><button class="'+s+"-button "+s+'-day" type="button" data-year="'+t.year+'" data-month="'+t.month+'" data-day="'+t.day+'"><span>'+t.day+"</span></button></td>"},_htmlMonth:function(t,e){var s=this._dateToUtc(new Date),i=this._daysInMonth(t,e),a=new Date(Date.UTC(t,e,1)).getUTCDay(),n=[],l=[];this.c.firstDay>0&&(a-=this.c.firstDay,a<0&&(a+=7));for(var c=i+a,v=c;v>7;)v-=7;c+=7-v;var f=this.c.minDate,p=this.c.maxDate;f&&(f.setUTCHours(0),f.setUTCMinutes(0),f.setSeconds(0)),p&&(p.setUTCHours(23),p.setUTCMinutes(59),p.setSeconds(59));for(var T=0,h=0;T<c;T++){var D=new Date(Date.UTC(t,e,1+(T-a))),g=this.s.d?this._compareDates(D,this.s.d):!1,U=this._compareDates(D,s),k=T<a||T>=i+a,_=f&&D<f||p&&D>p,C=this.c.disableDays;(Array.isArray(C)&&o.inArray(D.getUTCDay(),C)!==-1||typeof C=="function"&&C(D)===!0)&&(_=!0);var w={day:1+(T-a),month:e,year:t,selected:g,today:U,disabled:_,empty:k};l.push(this._htmlDay(w)),++h===7&&(this.c.showWeekNumber&&l.unshift(this._htmlWeekOfYear(T-a,e,t)),n.push("<tr>"+l.join("")+"</tr>"),l=[],h=0)}var b=this.c.classPrefix,A=b+"-table";if(this.c.showWeekNumber&&(A+=" weekNumber"),f){var O=f>=new Date(Date.UTC(t,e,1,0,0,0));this.dom.title.find("div."+b+"-iconLeft").css("display",O?"none":"block")}if(p){var R=p<new Date(Date.UTC(t,e+1,1,0,0,0));this.dom.title.find("div."+b+"-iconRight").css("display",R?"none":"block")}return'<table class="'+A+'"><thead>'+this._htmlMonthHead()+"</thead><tbody>"+n.join("")+"</tbody></table>"},_htmlMonthHead:function(){var t=[],e=this.c.firstDay,s=this.c.i18n,i=function(n){for(n+=e;n>=7;)n-=7;return s.weekdays[n]};this.c.showWeekNumber&&t.push("<th></th>");for(var a=0;a<7;a++)t.push("<th>"+i(a)+"</th>");return t.join("")},_htmlWeekOfYear:function(t,e,s){var i=new Date(s,e,t,0,0,0,0);i.setDate(i.getDate()+4-(i.getDay()||7));var a=new Date(s,0,1),n=Math.ceil(((i-a)/864e5+1)/7);return'<td class="'+this.c.classPrefix+'-week">'+n+"</td>"},_needValue:function(){return this.s.d||(this.s.d=this._dateToUtc(new Date)),this.s.d},_options:function(t,e,s){s||(s=e);var i=this.dom.container.find("select."+this.c.classPrefix+"-"+t);i.empty();for(var a=0,n=e.length;a<n;a++)i.append('<option value="'+e[a]+'">'+s[a]+"</option>")},_optionSet:function(t,e){var s=this.dom.container.find("select."+this.c.classPrefix+"-"+t),i=s.parent().children("span");s.val(e);var a=s.find("option:selected");i.html(a.length!==0?a.text():this.c.i18n.unknown)},_optionsTime:function(t,e,s,i,a){var f=this.c.classPrefix,n=this.dom.container.find("div."+f+"-"+t),l,c,v=e===12?function(_){return _}:this._pad,f=this.c.classPrefix,p=f+"-table",T=this.c.i18n;if(!!n.length){var h="",D=10,g=function(_,C,w){e===12&&typeof _=="number"&&(s>=12&&(_+=12),_==12?_=0:_==24&&(_=12));var b=s===_||_==="am"&&s<12||_==="pm"&&s>=12?"selected":"";return i&&o.inArray(_,i)===-1&&(b+=" disabled"),w&&(b+=" "+w),'<td class="selectable '+b+'"><button class="'+f+"-button "+f+'-day" type="button" data-unit="'+t+'" data-value="'+_+'"><span>'+C+"</span></button></td>"};if(e===12){for(h+="<tr>",l=1;l<=6;l++)h+=g(l,v(l));for(h+=g("am",T.amPm[0]),h+="</tr>",h+="<tr>",l=7;l<=12;l++)h+=g(l,v(l));h+=g("pm",T.amPm[1]),h+="</tr>",D=7}else if(e===24){var U=0;for(c=0;c<4;c++){for(h+="<tr>",l=0;l<6;l++)h+=g(U,v(U)),U++;h+="</tr>"}D=6}else{for(h+="<tr>",c=0;c<60;c+=10)h+=g(c,v(c),"range");h+="</tr>",h+='</tbody></thead><table class="'+p+" "+p+'-nospace"><tbody>';var k=a!==null?a:Math.floor(s/10)*10;for(h+="<tr>",c=k+1;c<k+10;c++)h+=g(c,v(c));h+="</tr>",D=6}n.empty().append('<table class="'+p+'"><thead><tr><th colspan="'+D+'">'+T[t]+"</th></tr></thead><tbody>"+h+"</tbody></table>")}},_optionsTitle:function(){var t=this.c.i18n,e=this.c.minDate,s=this.c.maxDate,i=e?e.getFullYear():null,a=s?s.getFullYear():null,n=i!==null?i:new Date().getFullYear()-this.c.yearRange,l=a!==null?a:new Date().getFullYear()+this.c.yearRange;this._options("month",this._range(0,11),t.months),this._options("year",this._range(n,l))},_pad:function(t){return t<10?"0"+t:t},_position:function(){var t=this.c.attachTo==="input"?this.dom.input.position():this.dom.input.offset(),e=this.dom.container,s=this.dom.input.outerHeight();if(e.hasClass("inline")){e.insertAfter(this.dom.input);return}this.s.parts.date&&this.s.parts.time&&o(r).width()>550?e.addClass("horizontal"):e.removeClass("horizontal"),this.c.attachTo==="input"?e.css({top:t.top+s,left:t.left}).insertAfter(this.dom.input):e.css({top:t.top+s,left:t.left}).appendTo("body");var i=e.outerHeight(),a=e.outerWidth(),n=o(r).scrollTop();if(t.top+s+i-n>o(r).height()){var l=t.top-i;e.css("top",l<0?0:l)}if(a+t.left>o(r).width()){var c=o(r).width()-a;this.c.attachTo==="input"&&(c-=o(e).offsetParent().offset().left),e.css("left",c<0?0:c)}},_range:function(t,e,s){var i=[];s||(s=1);for(var a=t;a<=e;a+=s)i.push(a);return i},_setCalander:function(){this.s.display&&this.dom.calendar.empty().append(this._htmlMonth(this.s.display.getUTCFullYear(),this.s.display.getUTCMonth()))},_setTitle:function(){this._optionSet("month",this.s.display.getUTCMonth()),this._optionSet("year",this.s.display.getUTCFullYear())},_setTime:function(){var t=this,e=this.s.d,s=null;u&&u==r.luxon&&(s=u.DateTime.fromJSDate(e));var i=s!=null?s.hour:e?e.getUTCHours():0,a=function(n){return t.c[n+"Available"]?t.c[n+"Available"]:t._range(0,59,t.c[n+"Increment"])};this._optionsTime("hours",this.s.parts.hours12?12:24,i,this.c.hoursAvailable),this._optionsTime("minutes",60,s!=null?s.minute:e?e.getUTCMinutes():0,a("minutes"),this.s.minutesRange),this._optionsTime("seconds",60,s!=null?s.second:e?e.getSeconds():0,a("seconds"),this.s.secondsRange)},_show:function(){var t=this,e=this.s.namespace;this._position(),o(r).on("scroll."+e+" resize."+e,function(){t._position()}),o("div.DTE_Body_Content").on("scroll."+e,function(){t._position()}),o("div.dataTables_scrollBody").on("scroll."+e,function(){t._position()});var s=this.dom.input[0].offsetParent;s!==y.body&&o(s).on("scroll."+e,function(){t._position()}),o(y).on("keydown."+e,function(i){(i.keyCode===9||i.keyCode===27||i.keyCode===13)&&t._hide()}),setTimeout(function(){o("body").on("click."+e,function(i){var a=o(i.target).parents();!a.filter(t.dom.container).length&&i.target!==t.dom.input[0]&&t._hide()})},10)},_writeOutput:function(t){var e=this.s.d,s="";e&&(s=u&&u==r.luxon?u.DateTime.fromJSDate(this.s.d).toFormat(this.c.format):u?u.utc(e,x,this.c.locale,this.c.strict).format(this.c.format):e.getUTCFullYear()+"-"+this._pad(e.getUTCMonth()+1)+"-"+this._pad(e.getUTCDate())),this.dom.input.val(s).trigger("change",{write:e}),this.dom.input.attr("type")==="hidden"&&this.val(s,!1),t&&this.dom.input.focus()}}),m.use=function(t){u=t},m._instance=0,m.defaults={attachTo:"body",buttons:{clear:!1,today:!1},classPrefix:"dt-datetime",disableDays:null,firstDay:1,format:"YYYY-MM-DD",hoursAvailable:null,i18n:{clear:"Clear",previous:"Previous",next:"Next",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],amPm:["am","pm"],hours:"Hour",minutes:"Minute",seconds:"Second",unknown:"-",today:"Today"},maxDate:null,minDate:null,minutesAvailable:null,minutesIncrement:1,strict:!0,locale:"en",onChange:function(){},secondsAvailable:null,secondsIncrement:1,showWeekNumber:!1,yearRange:25},m.version="1.1.2",r.DateTime||(r.DateTime=m),o.fn.dtDateTime=function(t){return this.each(function(){new m(this,t)})},o.fn.dataTable&&(o.fn.dataTable.DateTime=m,o.fn.DataTable.DateTime=m,o.fn.dataTable.Editor&&(o.fn.dataTable.Editor.DateTime=m)),m})})(j);const G=j.exports;const q={class:"container"},K={class:"row mb-5"},Q=z('<div class="col-md-3"><label class="form-label" for="to">To:</label><input type="date" class="form-control" id="to"></div><div class="col-md-3"><label class="form-label" for="from">From:</label><input type="date" class="form-control" id="from"></div>',2),X={class:"col-md-3 align-self-end"},Z={class:"col-md-3 align-self-end"},$={class:"row"},tt={class:"col-md-12"},et=d("thead",null,[d("tr",null,[d("th",null,"id"),d("th",null,"calldate"),d("th",null,"cnam"),d("th",null,"dst"),d("th",null,"dcontext"),d("th",null,"disposition"),d("th",null,"duration"),d("th",{class:"hidden"},"created_at"),d("th",{class:"hidden"},"updated_at")])],-1),st=d("tfoot",null,[d("tr",null,[d("th",null,"id"),d("th",null,"calldate"),d("th",null,"cnam"),d("th",null,"dst"),d("th",null,"dcontext"),d("th",null,"disposition"),d("th",null,"duration"),d("th",{class:"hidden"},"created_at"),d("th",{class:"hidden"},"updated_at")])],-1),it={__name:"TheTablePage",setup(Y){M.extend(I),F.use(G);let H={url:S.GET_API,dataSrc:function(m){let t=m.data;return t.map(e=>{e.duration=M.utc(e.duration*1e3).format("HH:mm:ss"),e.duration=e.duration===0?"00:00:00":e.duration}),t}};const o=[{data:"id"},{data:"calldate",type:"date"},{data:"cnam"},{data:"dst"},{data:"dcontext"},{data:"disposition"},{data:"duration"},{data:"created_at",visible:!1},{data:"updated_at",visible:!1}];let r;const y=L(null);function x(){r=y.value.dt();let m=M(P("#to").val()),t=M(P("#from").val()),s=r.data().filter((i,a)=>{let n=M(i.calldate);if(!m.isValid()||!t.isValid()||n.isValid()&&m.isBefore(n)&&n.isBefore(t))return!0});r.clear().rows.add(s).draw()}function u(){r=y.value.dt(),r.ajax.url(S.GET_API).load(),r.search("").draw()}return V(()=>{P("input").on("change",function(){r=y.value.dt(),r.ajax.url(S.GET_API).load()})}),(m,t)=>(J(),W("div",q,[d("form",null,[d("div",K,[Q,d("div",X,[d("button",{ref:"button",onClick:t[0]||(t[0]=e=>x()),class:"btn btn-primary w-100",type:"button"}," Search ",512)]),d("div",Z,[d("button",{onClick:t[1]||(t[1]=e=>u()),class:"btn btn-primary w-100",type:"reset"}," Clear ")])])]),d("div",$,[d("div",tt,[B(N(F),{ref_key:"table",ref:y,id:"record-list",columns:o,ajax:N(H),options:m.options,class:"display",width:"100%"},{default:E(()=>[et,st]),_:1},8,["ajax","options"])])])]))}};export{it as default};
